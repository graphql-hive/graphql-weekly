---
import Layout from "../layouts/Layout.astro";
import "../index.css";

const repositoryUrl = "https://github.com/graphql-hive/graphql-weekly";
---

<Layout title="Access Required - GraphQL Weekly CMS">
  <div class="min-h-screen bg-neu-50 dark:bg-neu-950 flex items-center justify-center">
    <div class="text-center p-8 max-w-md">
      <h1 class="text-2xl text-neu-900 dark:text-neu-100 mb-4">
        Access Required
      </h1>
      <p class="text-neu-600 dark:text-neu-400 mb-2">
        You need to be a collaborator on the repository to access the CMS.
      </p>
      <a
        class="text-[#C2F653] hover:underline mb-6 block"
        href={repositoryUrl}
        rel="noopener noreferrer"
        target="_blank"
      >
        graphql-hive/graphql-weekly
      </a>
      <p class="text-sm text-neu-500 dark:text-neu-500 mb-6">
        Ask a repository admin to add you as a collaborator.
      </p>
      <button
        id="sign-out-btn"
        class="px-3 py-1.5 text-sm text-neu-500 dark:text-neu-400 border border-neu-200 dark:border-neu-700 hover:bg-neu-100 dark:hover:bg-neu-800 cursor-pointer"
      >
        Sign out
      </button>
    </div>
  </div>
</Layout>

<script>
  import { signOut } from "../client/auth";

  document.getElementById("sign-out-btn")?.addEventListener("click", () => {
    signOut({ fetchOptions: { onSuccess: () => { window.location.href = "/login"; } } });
  });
</script>
